<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.aulang.job.admin.dao.JobDataSourceDao">

  <sql id="allColumns">
    id, `name`, `type`, `group_name`, db_name, username, password, jdbc_url, driver_class, zk_address, creator, create_time, modifier, update_time, remark
  </sql>

  <select id="findBy" resultType="cn.aulang.job.admin.model.po.JobDataSource">
    select <include refid="allColumns"/> from job_datasource
    <where>
      <if test="name != null and name != ''">
        <bind name="name" value="'%' + name + '%'"/>
        and `name` like #{name}
      </if>
      <if test="type != null and type != ''">
        and `type` = #{type}
      </if>
      <if test="dbName != null and dbName != ''">
        <bind name="dbName" value="'%' + dbName + '%'"/>
        and db_name like #{dbName}
      </if>
      <if test="groupName != null and groupName != ''">
        and `group_name` = #{groupName}
      </if>
    </where>
    order by id desc
  </select>

  <select id="findGroupNames" resultType="java.lang.String">
    select group_name from job_datasource group by group_name order by group_name asc
  </select>
</mapper>